---
#- name: Configure SNMP on AlmaLinux
#  hosts: all
#  become: true

#  tasks:
    - name: Copy snmpd.conf file
      copy:
        src: files/snmpd.conf  # Ganti dengan jalur relatif ke file konfigurasi snmpd.conf
        dest: /etc/snmp/snmpd.conf
      notify: Restart SNMP Service

    - name: Configure Chrony with NTP Pool Servers
      lineinfile:
        path: /etc/chrony.conf
        line: "server id.pool.ntp.org iburst"
        insertafter: "^# Use public servers from the pool.ntp.org project."
      notify: Restart Chrony Service
      tags: configure_chrony

    - name: Set MOTD
      copy:
        content: |
          *******************************************************************************
          **                            ATTENTION: SECURITY NOTICE                     **
          **                                                                           **
          ** This system is for authorized use only. Unauthorized access is prohibited.**
          ** Usage may be monitored, recorded, and subject to audit.                   **
          **                                                                           **
          ** All activities performed on this system are logged and archived.          **
          ** If you do not have explicit permission to access this system, please      **
          ** disconnect immediately.                                                   **
          **                                                                           **
          ** This system is the property of Fornet Solusindo       .                   **
          **                                                                           **
          ** Copyright 2023 Fornet Solusindo. All rights reserved.                     **
          **                                                                           **
          *******************************************************************************
        dest: /etc/motd

 